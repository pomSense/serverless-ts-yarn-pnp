{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = sortFields;\nvar _has = require(\"lodash-es/has\");\nvar _has2 = _interopRequireDefault(_has);\nvar _toposort = require(\"toposort\");\nvar _toposort2 = _interopRequireDefault(_toposort);\nvar _propertyExpr = require(\"property-expr\");\nvar _Reference = require(\"../Reference\");\nvar _Reference2 = _interopRequireDefault(_Reference);\nvar _isSchema = require(\"./isSchema\");\nvar _isSchema2 = _interopRequireDefault(_isSchema);\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction sortFields(fields, excludes) {\n  if (excludes === void 0) {\n    excludes = [];\n  }\n  var edges = [];\n  var nodes = [];\n  function addNode(depPath, key) {\n    var node = (0, _propertyExpr.split)(depPath)[0];\n    if (!~nodes.indexOf(node)) nodes.push(node);\n    if (!~excludes.indexOf(key + \"-\" + node)) edges.push([key, node]);\n  }\n  var _loop = function _loop(key) {\n    if ((0, _has2.default)(fields, key)) {\n      var value = fields[key];\n      if (!~nodes.indexOf(key)) nodes.push(key);\n      if (_Reference2.default.isRef(value) && value.isSibling) addNode(value.path, key);else if ((0, _isSchema2.default)(value) && value._deps) value._deps.forEach(function (path) {\n        return addNode(path, key);\n      });\n    }\n  };\n  for (var key in fields) {\n    _loop(key);\n  }\n  return _toposort2.default.array(nodes, edges).reverse();\n}","map":{"version":3,"names":["sortFields","_has","require","_has2","_interopRequireDefault","_toposort","_toposort2","_propertyExpr","_Reference","_Reference2","_isSchema","_isSchema2","obj","__esModule","default","fields","excludes","edges","nodes","addNode","depPath","key","node","split","indexOf","push","_loop","has","value","Ref","isRef","isSibling","path","isSchema","_deps","forEach","toposort","array","reverse"],"sources":["/Users/pom/Code/serverless-ts-yarn-pnp/.yarn/cache/yup-npm-0.31.1-e4cae13a77-79bf28d6af.zip/node_modules/yup/es/util/sortFields.js"],"sourcesContent":["import has from \"lodash-es/has\";\nimport toposort from 'toposort';\nimport { split } from 'property-expr';\nimport Ref from '../Reference';\nimport isSchema from './isSchema';\nexport default function sortFields(fields, excludes) {\n  if (excludes === void 0) {\n    excludes = [];\n  }\n\n  var edges = [];\n  var nodes = [];\n\n  function addNode(depPath, key) {\n    var node = split(depPath)[0];\n    if (!~nodes.indexOf(node)) nodes.push(node);\n    if (!~excludes.indexOf(key + \"-\" + node)) edges.push([key, node]);\n  }\n\n  var _loop = function _loop(key) {\n    if (has(fields, key)) {\n      var value = fields[key];\n      if (!~nodes.indexOf(key)) nodes.push(key);\n      if (Ref.isRef(value) && value.isSibling) addNode(value.path, key);else if (isSchema(value) && value._deps) value._deps.forEach(function (path) {\n        return addNode(path, key);\n      });\n    }\n  };\n\n  for (var key in fields) {\n    _loop(key);\n  }\n\n  return toposort.array(nodes, edges).reverse();\n}"],"mappings":";;;;;kBAKwBA,UAAU;AALlC,IAAAC,IAAA,GAAAC,OAAA;AAAgC,IAAAC,KAAA,GAAAC,sBAAA,CAAAH,IAAA;AAChC,IAAAI,SAAA,GAAAH,OAAA;AAAgC,IAAAI,UAAA,GAAAF,sBAAA,CAAAC,SAAA;AAChC,IAAAE,aAAA,GAAAL,OAAA;AACA,IAAAM,UAAA,GAAAN,OAAA;AAA+B,IAAAO,WAAA,GAAAL,sBAAA,CAAAI,UAAA;AAC/B,IAAAE,SAAA,GAAAR,OAAA;AAAkC,IAAAS,UAAA,GAAAP,sBAAA,CAAAM,SAAA;AAAA,SAAAN,uBAAAQ,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AACnB,SAASZ,UAAUA,CAACe,MAAM,EAAEC,QAAQ,EAAE;EACnD,IAAIA,QAAQ,KAAK,KAAK,CAAC,EAAE;IACvBA,QAAQ,GAAG,EAAE;EACf;EAEA,IAAIC,KAAK,GAAG,EAAE;EACd,IAAIC,KAAK,GAAG,EAAE;EAEd,SAASC,OAAOA,CAACC,OAAO,EAAEC,GAAG,EAAE;IAC7B,IAAIC,IAAI,GAAG,IAAAC,mBAAK,EAACH,OAAO,CAAC,CAAC,CAAC,CAAC;IAC5B,IAAI,CAAC,CAACF,KAAK,CAACM,OAAO,CAACF,IAAI,CAAC,EAAEJ,KAAK,CAACO,IAAI,CAACH,IAAI,CAAC;IAC3C,IAAI,CAAC,CAACN,QAAQ,CAACQ,OAAO,CAACH,GAAG,GAAG,GAAG,GAAGC,IAAI,CAAC,EAAEL,KAAK,CAACQ,IAAI,CAAC,CAACJ,GAAG,EAAEC,IAAI,CAAC,CAAC;EACnE;EAEA,IAAII,KAAK,GAAG,SAASA,KAAKA,CAACL,GAAG,EAAE;IAC9B,IAAI,IAAAM,aAAG,EAACZ,MAAM,EAAEM,GAAG,CAAC,EAAE;MACpB,IAAIO,KAAK,GAAGb,MAAM,CAACM,GAAG,CAAC;MACvB,IAAI,CAAC,CAACH,KAAK,CAACM,OAAO,CAACH,GAAG,CAAC,EAAEH,KAAK,CAACO,IAAI,CAACJ,GAAG,CAAC;MACzC,IAAIQ,mBAAG,CAACC,KAAK,CAACF,KAAK,CAAC,IAAIA,KAAK,CAACG,SAAS,EAAEZ,OAAO,CAACS,KAAK,CAACI,IAAI,EAAEX,GAAG,CAAC,CAAC,KAAK,IAAI,IAAAY,kBAAQ,EAACL,KAAK,CAAC,IAAIA,KAAK,CAACM,KAAK,EAAEN,KAAK,CAACM,KAAK,CAACC,OAAO,CAAC,UAAUH,IAAI,EAAE;QAC7I,OAAOb,OAAO,CAACa,IAAI,EAAEX,GAAG,CAAC;MAC3B,CAAC,CAAC;IACJ;EACF,CAAC;EAED,KAAK,IAAIA,GAAG,IAAIN,MAAM,EAAE;IACtBW,KAAK,CAACL,GAAG,CAAC;EACZ;EAEA,OAAOe,kBAAQ,CAACC,KAAK,CAACnB,KAAK,EAAED,KAAK,CAAC,CAACqB,OAAO,CAAC,CAAC;AAC/C"},"metadata":{},"sourceType":"module"}