{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = undefined && undefined.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InMemoryLRUCache = void 0;\nconst lru_cache_1 = __importDefault(require(\"lru-cache\"));\nclass InMemoryLRUCache {\n  constructor(lruCacheOpts) {\n    this.cache = new lru_cache_1.default({\n      sizeCalculation: InMemoryLRUCache.sizeCalculation,\n      maxSize: Math.pow(2, 20) * 30,\n      ...lruCacheOpts\n    });\n  }\n  static sizeCalculation(item) {\n    if (typeof item === \"string\") {\n      return item.length;\n    }\n    if (typeof item === \"object\") {\n      return Buffer.byteLength(JSON.stringify(item), \"utf8\");\n    }\n    return 1;\n  }\n  async set(key, value, options) {\n    if (options === null || options === void 0 ? void 0 : options.ttl) {\n      this.cache.set(key, value, {\n        ttl: options.ttl * 1000\n      });\n    } else {\n      this.cache.set(key, value);\n    }\n  }\n  async get(key) {\n    return this.cache.get(key);\n  }\n  async delete(key) {\n    return this.cache.delete(key);\n  }\n  clear() {\n    this.cache.clear();\n  }\n  keys() {\n    return [...this.cache.keys()];\n  }\n}\nexports.InMemoryLRUCache = InMemoryLRUCache;","map":{"version":3,"mappings":";;;;;;;;;;;AAAA,MAAAA,WAAA,GAAAC,eAAA,CAAAC,OAAA;AAIA,MAAaC,gBAAgB;EAG3BC,YAAYC,YAA0C;IACpD,IAAI,CAACC,KAAK,GAAG,IAAIN,WAAA,CAAAO,OAAQ,CAAC;MACxBC,eAAe,EAAEL,gBAAgB,CAACK,eAAe;MAGjDC,OAAO,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,EAAE;MAC7B,GAAGN;KACJ,CAAC;EACJ;EAMA,OAAOG,eAAeA,CAAII,IAAO;IAC/B,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;MAC5B,OAAOA,IAAI,CAACC,MAAM;;IAEpB,IAAI,OAAOD,IAAI,KAAK,QAAQ,EAAE;MAE5B,OAAOE,MAAM,CAACC,UAAU,CAACC,IAAI,CAACC,SAAS,CAACL,IAAI,CAAC,EAAE,MAAM,CAAC;;IAExD,OAAO,CAAC;EACV;EAEA,MAAMM,GAAGA,CAACC,GAAW,EAAEC,KAAQ,EAAEC,OAAiC;IAChE,IAAIA,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEC,GAAG,EAAE;MAChB,IAAI,CAAChB,KAAK,CAACY,GAAG,CAACC,GAAG,EAAEC,KAAK,EAAE;QAAEE,GAAG,EAAED,OAAO,CAACC,GAAG,GAAG;MAAI,CAAE,CAAC;KACxD,MAAM;MACL,IAAI,CAAChB,KAAK,CAACY,GAAG,CAACC,GAAG,EAAEC,KAAK,CAAC;;EAE9B;EAEA,MAAMG,GAAGA,CAACJ,GAAW;IACnB,OAAO,IAAI,CAACb,KAAK,CAACiB,GAAG,CAACJ,GAAG,CAAC;EAC5B;EAEA,MAAMK,MAAMA,CAACL,GAAW;IACtB,OAAO,IAAI,CAACb,KAAK,CAACkB,MAAM,CAACL,GAAG,CAAC;EAC/B;EAEAM,KAAKA,CAAA;IACH,IAAI,CAACnB,KAAK,CAACmB,KAAK,EAAE;EACpB;EAEAC,IAAIA,CAAA;IAEF,OAAO,CAAC,GAAG,IAAI,CAACpB,KAAK,CAACoB,IAAI,EAAE,CAAC;EAC/B;;AAnDFC,OAAA,CAAAxB,gBAAA,GAAAA,gBAAA","names":["lru_cache_1","__importDefault","require","InMemoryLRUCache","constructor","lruCacheOpts","cache","default","sizeCalculation","maxSize","Math","pow","item","length","Buffer","byteLength","JSON","stringify","set","key","value","options","ttl","get","delete","clear","keys","exports"],"sourceRoot":"","sources":["../src/InMemoryLRUCache.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}