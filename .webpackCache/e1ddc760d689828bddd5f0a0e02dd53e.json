{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = runTests;\nvar _ValidationError = require(\"../ValidationError\");\nvar _ValidationError2 = _interopRequireDefault(_ValidationError);\nvar _async = require(\"./async\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction runTests(options, cb) {\n  var endEarly = options.endEarly,\n    tests = options.tests,\n    args = options.args,\n    value = options.value,\n    errors = options.errors,\n    sort = options.sort,\n    path = options.path;\n  var callback = (0, _async.once)(cb);\n  var count = tests.length;\n  var nestedErrors = [];\n  errors = errors ? errors : [];\n  if (!count) return errors.length ? callback(new _ValidationError2.default(errors, value, path)) : callback(null, value);\n  for (var i = 0; i < tests.length; i++) {\n    var test = tests[i];\n    test(args, function finishTestRun(err) {\n      if (err) {\n        // always return early for non validation errors\n        if (!_ValidationError2.default.isError(err)) {\n          return callback(err);\n        }\n        if (endEarly) {\n          err.value = value;\n          return callback(err);\n        }\n        nestedErrors.push(err);\n      }\n      if (--count <= 0) {\n        if (nestedErrors.length) {\n          if (sort) nestedErrors.sort(sort); //show parent errors after the nested ones: name.first, name\n\n          if (errors.length) nestedErrors.push.apply(nestedErrors, errors);\n          errors = nestedErrors;\n        }\n        if (errors.length) {\n          callback(new _ValidationError2.default(errors, value, path));\n          return;\n        }\n        callback(null, value);\n      }\n    });\n  }\n}","map":{"version":3,"names":["runTests","_ValidationError","require","_ValidationError2","_interopRequireDefault","_async","obj","__esModule","default","options","cb","endEarly","tests","args","value","errors","sort","path","callback","once","count","length","nestedErrors","ValidationError","i","test","finishTestRun","err","isError","push","apply"],"sources":["/Users/pom/Code/serverless-ts-yarn-pnp/.yarn/cache/yup-npm-0.31.1-e4cae13a77-79bf28d6af.zip/node_modules/yup/es/util/runTests.js"],"sourcesContent":["import ValidationError from '../ValidationError';\nimport { once } from './async';\nexport default function runTests(options, cb) {\n  var endEarly = options.endEarly,\n      tests = options.tests,\n      args = options.args,\n      value = options.value,\n      errors = options.errors,\n      sort = options.sort,\n      path = options.path;\n  var callback = once(cb);\n  var count = tests.length;\n  var nestedErrors = [];\n  errors = errors ? errors : [];\n  if (!count) return errors.length ? callback(new ValidationError(errors, value, path)) : callback(null, value);\n\n  for (var i = 0; i < tests.length; i++) {\n    var test = tests[i];\n    test(args, function finishTestRun(err) {\n      if (err) {\n        // always return early for non validation errors\n        if (!ValidationError.isError(err)) {\n          return callback(err);\n        }\n\n        if (endEarly) {\n          err.value = value;\n          return callback(err);\n        }\n\n        nestedErrors.push(err);\n      }\n\n      if (--count <= 0) {\n        if (nestedErrors.length) {\n          if (sort) nestedErrors.sort(sort); //show parent errors after the nested ones: name.first, name\n\n          if (errors.length) nestedErrors.push.apply(nestedErrors, errors);\n          errors = nestedErrors;\n        }\n\n        if (errors.length) {\n          callback(new ValidationError(errors, value, path));\n          return;\n        }\n\n        callback(null, value);\n      }\n    });\n  }\n}"],"mappings":";;;;;kBAEwBA,QAAQ;AAFhC,IAAAC,gBAAA,GAAAC,OAAA;AAAiD,IAAAC,iBAAA,GAAAC,sBAAA,CAAAH,gBAAA;AACjD,IAAAI,MAAA,GAAAH,OAAA;AAA+B,SAAAE,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAChB,SAASN,QAAQA,CAACS,OAAO,EAAEC,EAAE,EAAE;EAC5C,IAAIC,QAAQ,GAAGF,OAAO,CAACE,QAAQ;IAC3BC,KAAK,GAAGH,OAAO,CAACG,KAAK;IACrBC,IAAI,GAAGJ,OAAO,CAACI,IAAI;IACnBC,KAAK,GAAGL,OAAO,CAACK,KAAK;IACrBC,MAAM,GAAGN,OAAO,CAACM,MAAM;IACvBC,IAAI,GAAGP,OAAO,CAACO,IAAI;IACnBC,IAAI,GAAGR,OAAO,CAACQ,IAAI;EACvB,IAAIC,QAAQ,GAAG,IAAAC,WAAI,EAACT,EAAE,CAAC;EACvB,IAAIU,KAAK,GAAGR,KAAK,CAACS,MAAM;EACxB,IAAIC,YAAY,GAAG,EAAE;EACrBP,MAAM,GAAGA,MAAM,GAAGA,MAAM,GAAG,EAAE;EAC7B,IAAI,CAACK,KAAK,EAAE,OAAOL,MAAM,CAACM,MAAM,GAAGH,QAAQ,CAAC,IAAIK,yBAAe,CAACR,MAAM,EAAED,KAAK,EAAEG,IAAI,CAAC,CAAC,GAAGC,QAAQ,CAAC,IAAI,EAAEJ,KAAK,CAAC;EAE7G,KAAK,IAAIU,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGZ,KAAK,CAACS,MAAM,EAAEG,CAAC,EAAE,EAAE;IACrC,IAAIC,IAAI,GAAGb,KAAK,CAACY,CAAC,CAAC;IACnBC,IAAI,CAACZ,IAAI,EAAE,SAASa,aAAaA,CAACC,GAAG,EAAE;MACrC,IAAIA,GAAG,EAAE;QACP;QACA,IAAI,CAACJ,yBAAe,CAACK,OAAO,CAACD,GAAG,CAAC,EAAE;UACjC,OAAOT,QAAQ,CAACS,GAAG,CAAC;QACtB;QAEA,IAAIhB,QAAQ,EAAE;UACZgB,GAAG,CAACb,KAAK,GAAGA,KAAK;UACjB,OAAOI,QAAQ,CAACS,GAAG,CAAC;QACtB;QAEAL,YAAY,CAACO,IAAI,CAACF,GAAG,CAAC;MACxB;MAEA,IAAI,EAAEP,KAAK,IAAI,CAAC,EAAE;QAChB,IAAIE,YAAY,CAACD,MAAM,EAAE;UACvB,IAAIL,IAAI,EAAEM,YAAY,CAACN,IAAI,CAACA,IAAI,CAAC,CAAC,CAAC;;UAEnC,IAAID,MAAM,CAACM,MAAM,EAAEC,YAAY,CAACO,IAAI,CAACC,KAAK,CAACR,YAAY,EAAEP,MAAM,CAAC;UAChEA,MAAM,GAAGO,YAAY;QACvB;QAEA,IAAIP,MAAM,CAACM,MAAM,EAAE;UACjBH,QAAQ,CAAC,IAAIK,yBAAe,CAACR,MAAM,EAAED,KAAK,EAAEG,IAAI,CAAC,CAAC;UAClD;QACF;QAEAC,QAAQ,CAAC,IAAI,EAAEJ,KAAK,CAAC;MACvB;IACF,CAAC,CAAC;EACJ;AACF"},"metadata":{},"sourceType":"module"}