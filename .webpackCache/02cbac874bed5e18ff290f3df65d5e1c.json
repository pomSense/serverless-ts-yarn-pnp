{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ApolloServerPluginDrainHttpServer = void 0;\nconst stoppable_1 = require(\"./stoppable\");\nfunction ApolloServerPluginDrainHttpServer(options) {\n  const stopper = new stoppable_1.Stopper(options.httpServer);\n  return {\n    async serverWillStart() {\n      return {\n        async drainServer() {\n          var _a;\n          await stopper.stop((_a = options.stopGracePeriodMillis) !== null && _a !== void 0 ? _a : 10000);\n        }\n      };\n    }\n  };\n}\nexports.ApolloServerPluginDrainHttpServer = ApolloServerPluginDrainHttpServer;","map":{"version":3,"mappings":";;;;;;AAEA,MAAAA,WAAA,GAAAC,OAAA;AAuBA,SAAgBC,iCAAiCA,CAC/CC,OAAiD;EAEjD,MAAMC,OAAO,GAAG,IAAIJ,WAAA,CAAAK,OAAO,CAACF,OAAO,CAACG,UAAU,CAAC;EAC/C,OAAO;IACL,MAAMC,eAAeA,CAAA;MACnB,OAAO;QACL,MAAMC,WAAWA,CAAA;;UACf,MAAMJ,OAAO,CAACK,IAAI,CAAC,CAAAC,EAAA,GAAAP,OAAO,CAACQ,qBAAqB,cAAAD,EAAA,cAAAA,EAAA,GAAI,KAAM,CAAC;QAC7D;OACD;IACH;GACD;AACH;AAbAE,OAAA,CAAAV,iCAAA,GAAAA,iCAAA","names":["stoppable_1","require","ApolloServerPluginDrainHttpServer","options","stopper","Stopper","httpServer","serverWillStart","drainServer","stop","_a","stopGracePeriodMillis","exports"],"sourceRoot":"","sources":["../../../src/plugin/drainHttpServer/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}