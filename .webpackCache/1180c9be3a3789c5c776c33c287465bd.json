{"ast":null,"code":"\"use strict\";\n\n// ATTRIBUTION: https://github.com/dougmoscrop/serverless-http\nconst express = require('./express');\nconst koa = require('./koa');\nconst hapi = require('./hapi');\nfunction getFramework({\n  app,\n  log\n}) {\n  if (typeof app.callback === 'function') {\n    log.debug('SERVERLESS_EXPRESS:GET_FRAMEWORK:KOA');\n    return koa;\n  }\n  if (typeof app.handle === 'function') {\n    log.debug('SERVERLESS_EXPRESS:GET_FRAMEWORK:EXPRESS');\n    return express;\n  }\n\n  // Framework: ??\n  if (typeof app.handler === 'function') {\n    log.debug('SERVERLESS_EXPRESS:GET_FRAMEWORK:APP_HANDLER_FUNCTION');\n    return {\n      sendRequest: ({\n        request,\n        response\n      }) => {\n        app.handler(request, response);\n      }\n    };\n  }\n\n  // Framework: ??\n  if (typeof app._onRequest === 'function') {\n    log.debug('SERVERLESS_EXPRESS:GET_FRAMEWORK:APP_ON_REQUEST_FUNCTION');\n    return {\n      sendRequest: ({\n        request,\n        response\n      }) => {\n        app._onRequest(request, response);\n      }\n    };\n  }\n  if (typeof app === 'function') {\n    log.debug('SERVERLESS_EXPRESS:GET_FRAMEWORK:HAPI');\n    return hapi;\n  }\n  if (app.router && typeof app.router.route === 'function') {\n    log.debug('SERVERLESS_EXPRESS:GET_FRAMEWORK:APP_ROUTER_ROUTE_FUNCTION');\n    return {\n      sendRequest: ({\n        request,\n        response\n      }) => {\n        const {\n          url,\n          method,\n          headers,\n          body\n        } = request;\n        app.router.route({\n          url,\n          method,\n          headers,\n          body\n        }, response);\n      }\n    };\n  }\n  if (app._core && typeof app._core._dispatch === 'function') {\n    log.debug('SERVERLESS_EXPRESS:GET_FRAMEWORK:APP_CORE_DISPATCH_FUNCTION');\n    return {\n      sendRequest: ({\n        request,\n        response\n      }) => {\n        return app._core._dispatch({\n          app\n        })(request, response);\n      }\n    };\n  }\n  if (typeof app.main === 'function') {\n    log.debug('SERVERLESS_EXPRESS:GET_FRAMEWORK:APP_MAIN_FUNCTION');\n    return {\n      sendRequest: ({\n        request,\n        response\n      }) => {\n        return app.main(request, response);\n      }\n    };\n  }\n  throw new Error('Invalid app supplied. Valid frameworks include: Express, Koa, Hapi');\n}\nmodule.exports.getFramework = getFramework;","map":{"version":3,"names":["express","require","koa","hapi","getFramework","app","log","callback","debug","handle","handler","sendRequest","request","response","_onRequest","router","route","url","method","headers","body","_core","_dispatch","main","Error","module","exports"],"sources":["/Users/pom/Code/serverless-ts-yarn-pnp/.yarn/cache/@vendia-serverless-express-npm-4.10.4-2e67e59920-f33d3f0f08.zip/node_modules/@vendia/serverless-express/src/frameworks/index.js"],"sourcesContent":["// ATTRIBUTION: https://github.com/dougmoscrop/serverless-http\nconst express = require('./express')\nconst koa = require('./koa')\nconst hapi = require('./hapi')\n\nfunction getFramework ({ app, log }) {\n  if (typeof app.callback === 'function') {\n    log.debug('SERVERLESS_EXPRESS:GET_FRAMEWORK:KOA')\n    return koa\n  }\n\n  if (typeof app.handle === 'function') {\n    log.debug('SERVERLESS_EXPRESS:GET_FRAMEWORK:EXPRESS')\n    return express\n  }\n\n  // Framework: ??\n  if (typeof app.handler === 'function') {\n    log.debug('SERVERLESS_EXPRESS:GET_FRAMEWORK:APP_HANDLER_FUNCTION')\n    return {\n      sendRequest: ({ request, response }) => {\n        app.handler(request, response)\n      }\n    }\n  }\n\n  // Framework: ??\n  if (typeof app._onRequest === 'function') {\n    log.debug('SERVERLESS_EXPRESS:GET_FRAMEWORK:APP_ON_REQUEST_FUNCTION')\n    return {\n      sendRequest: ({ request, response }) => {\n        app._onRequest(request, response)\n      }\n    }\n  }\n\n  if (typeof app === 'function') {\n    log.debug('SERVERLESS_EXPRESS:GET_FRAMEWORK:HAPI')\n    return hapi\n  }\n\n  if (app.router && typeof app.router.route === 'function') {\n    log.debug('SERVERLESS_EXPRESS:GET_FRAMEWORK:APP_ROUTER_ROUTE_FUNCTION')\n    return {\n      sendRequest: ({ request, response }) => {\n        const { url, method, headers, body } = request\n        app.router.route({ url, method, headers, body }, response)\n      }\n    }\n  }\n\n  if (app._core && typeof app._core._dispatch === 'function') {\n    log.debug('SERVERLESS_EXPRESS:GET_FRAMEWORK:APP_CORE_DISPATCH_FUNCTION')\n    return {\n      sendRequest: ({ request, response }) => {\n        return app._core._dispatch({\n          app\n        })(request, response)\n      }\n    }\n  }\n\n  if (typeof app.main === 'function') {\n    log.debug('SERVERLESS_EXPRESS:GET_FRAMEWORK:APP_MAIN_FUNCTION')\n    return {\n      sendRequest: ({ request, response }) => {\n        return app.main(request, response)\n      }\n    }\n  }\n\n  throw new Error('Invalid app supplied. Valid frameworks include: Express, Koa, Hapi')\n}\n\nmodule.exports.getFramework = getFramework\n"],"mappings":";;AAAA;AACA,MAAMA,OAAO,GAAGC,OAAO,CAAC,WAAW,CAAC;AACpC,MAAMC,GAAG,GAAGD,OAAO,CAAC,OAAO,CAAC;AAC5B,MAAME,IAAI,GAAGF,OAAO,CAAC,QAAQ,CAAC;AAE9B,SAASG,YAAYA,CAAE;EAAEC,GAAG;EAAEC;AAAI,CAAC,EAAE;EACnC,IAAI,OAAOD,GAAG,CAACE,QAAQ,KAAK,UAAU,EAAE;IACtCD,GAAG,CAACE,KAAK,CAAC,sCAAsC,CAAC;IACjD,OAAON,GAAG;EACZ;EAEA,IAAI,OAAOG,GAAG,CAACI,MAAM,KAAK,UAAU,EAAE;IACpCH,GAAG,CAACE,KAAK,CAAC,0CAA0C,CAAC;IACrD,OAAOR,OAAO;EAChB;;EAEA;EACA,IAAI,OAAOK,GAAG,CAACK,OAAO,KAAK,UAAU,EAAE;IACrCJ,GAAG,CAACE,KAAK,CAAC,uDAAuD,CAAC;IAClE,OAAO;MACLG,WAAW,EAAEA,CAAC;QAAEC,OAAO;QAAEC;MAAS,CAAC,KAAK;QACtCR,GAAG,CAACK,OAAO,CAACE,OAAO,EAAEC,QAAQ,CAAC;MAChC;IACF,CAAC;EACH;;EAEA;EACA,IAAI,OAAOR,GAAG,CAACS,UAAU,KAAK,UAAU,EAAE;IACxCR,GAAG,CAACE,KAAK,CAAC,0DAA0D,CAAC;IACrE,OAAO;MACLG,WAAW,EAAEA,CAAC;QAAEC,OAAO;QAAEC;MAAS,CAAC,KAAK;QACtCR,GAAG,CAACS,UAAU,CAACF,OAAO,EAAEC,QAAQ,CAAC;MACnC;IACF,CAAC;EACH;EAEA,IAAI,OAAOR,GAAG,KAAK,UAAU,EAAE;IAC7BC,GAAG,CAACE,KAAK,CAAC,uCAAuC,CAAC;IAClD,OAAOL,IAAI;EACb;EAEA,IAAIE,GAAG,CAACU,MAAM,IAAI,OAAOV,GAAG,CAACU,MAAM,CAACC,KAAK,KAAK,UAAU,EAAE;IACxDV,GAAG,CAACE,KAAK,CAAC,4DAA4D,CAAC;IACvE,OAAO;MACLG,WAAW,EAAEA,CAAC;QAAEC,OAAO;QAAEC;MAAS,CAAC,KAAK;QACtC,MAAM;UAAEI,GAAG;UAAEC,MAAM;UAAEC,OAAO;UAAEC;QAAK,CAAC,GAAGR,OAAO;QAC9CP,GAAG,CAACU,MAAM,CAACC,KAAK,CAAC;UAAEC,GAAG;UAAEC,MAAM;UAAEC,OAAO;UAAEC;QAAK,CAAC,EAAEP,QAAQ,CAAC;MAC5D;IACF,CAAC;EACH;EAEA,IAAIR,GAAG,CAACgB,KAAK,IAAI,OAAOhB,GAAG,CAACgB,KAAK,CAACC,SAAS,KAAK,UAAU,EAAE;IAC1DhB,GAAG,CAACE,KAAK,CAAC,6DAA6D,CAAC;IACxE,OAAO;MACLG,WAAW,EAAEA,CAAC;QAAEC,OAAO;QAAEC;MAAS,CAAC,KAAK;QACtC,OAAOR,GAAG,CAACgB,KAAK,CAACC,SAAS,CAAC;UACzBjB;QACF,CAAC,CAAC,CAACO,OAAO,EAAEC,QAAQ,CAAC;MACvB;IACF,CAAC;EACH;EAEA,IAAI,OAAOR,GAAG,CAACkB,IAAI,KAAK,UAAU,EAAE;IAClCjB,GAAG,CAACE,KAAK,CAAC,oDAAoD,CAAC;IAC/D,OAAO;MACLG,WAAW,EAAEA,CAAC;QAAEC,OAAO;QAAEC;MAAS,CAAC,KAAK;QACtC,OAAOR,GAAG,CAACkB,IAAI,CAACX,OAAO,EAAEC,QAAQ,CAAC;MACpC;IACF,CAAC;EACH;EAEA,MAAM,IAAIW,KAAK,CAAC,oEAAoE,CAAC;AACvF;AAEAC,MAAM,CAACC,OAAO,CAACtB,YAAY,GAAGA,YAAY"},"metadata":{},"sourceType":"module"}