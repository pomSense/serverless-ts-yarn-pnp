{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UnboundedCache = void 0;\nclass UnboundedCache {\n  constructor(cache = new Map()) {\n    this.cache = cache;\n  }\n  async get(key) {\n    const entry = this.cache.get(key);\n    if (!entry) return undefined;\n    if (entry.deadline && entry.deadline <= Date.now()) {\n      await this.delete(key);\n      return undefined;\n    }\n    return entry.value;\n  }\n  async set(key, value, {\n    ttl\n  } = {\n    ttl: null\n  }) {\n    this.cache.set(key, {\n      value,\n      deadline: ttl ? Date.now() + ttl * 1000 : null\n    });\n  }\n  async delete(key) {\n    this.cache.delete(key);\n  }\n}\nexports.UnboundedCache = UnboundedCache;","map":{"version":3,"mappings":";;;;;;AAEA,MAAaA,cAAc;EACzBC,YACUC,KAAA,GAGJ,IAAIC,GAAG,EAAE;IAHL,KAAAD,KAAK,GAALA,KAAK;EAIZ;EAEH,MAAME,GAAGA,CAACC,GAAW;IACnB,MAAMC,KAAK,GAAG,IAAI,CAACJ,KAAK,CAACE,GAAG,CAACC,GAAG,CAAC;IACjC,IAAI,CAACC,KAAK,EAAE,OAAOC,SAAS;IAC5B,IAAID,KAAK,CAACE,QAAQ,IAAIF,KAAK,CAACE,QAAQ,IAAIC,IAAI,CAACC,GAAG,EAAE,EAAE;MAClD,MAAM,IAAI,CAACC,MAAM,CAACN,GAAG,CAAC;MACtB,OAAOE,SAAS;;IAElB,OAAOD,KAAK,CAACM,KAAK;EACpB;EAEA,MAAMC,GAAGA,CACPR,GAAW,EACXO,KAAQ,EACR;IAAEE;EAAG,IAA6B;IAAEA,GAAG,EAAE;EAAI,CAAE;IAE/C,IAAI,CAACZ,KAAK,CAACW,GAAG,CAACR,GAAG,EAAE;MAClBO,KAAK;MACLJ,QAAQ,EAAEM,GAAG,GAAGL,IAAI,CAACC,GAAG,EAAE,GAAGI,GAAG,GAAG,IAAI,GAAG;KAC3C,CAAC;EACJ;EAEA,MAAMH,MAAMA,CAACN,GAAW;IACtB,IAAI,CAACH,KAAK,CAACS,MAAM,CAACN,GAAG,CAAC;EACxB;;AA/BFU,OAAA,CAAAf,cAAA,GAAAA,cAAA","names":["UnboundedCache","constructor","cache","Map","get","key","entry","undefined","deadline","Date","now","delete","value","set","ttl","exports"],"sourceRoot":"","sources":["../../src/utils/UnboundedCache.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}