{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getEmbeddedSandboxHTML = exports.getEmbeddedExplorerHTML = exports.ApolloServerPluginLandingPageProductionDefault = exports.ApolloServerPluginLandingPageLocalDefault = void 0;\nfunction ApolloServerPluginLandingPageLocalDefault(options = {}) {\n  const {\n    version,\n    __internal_apolloStudioEnv__,\n    ...rest\n  } = options;\n  return ApolloServerPluginLandingPageDefault(version, {\n    isProd: false,\n    apolloStudioEnv: __internal_apolloStudioEnv__,\n    ...rest\n  });\n}\nexports.ApolloServerPluginLandingPageLocalDefault = ApolloServerPluginLandingPageLocalDefault;\nfunction ApolloServerPluginLandingPageProductionDefault(options = {}) {\n  const {\n    version,\n    __internal_apolloStudioEnv__,\n    ...rest\n  } = options;\n  return ApolloServerPluginLandingPageDefault(version, {\n    isProd: true,\n    apolloStudioEnv: __internal_apolloStudioEnv__,\n    ...rest\n  });\n}\nexports.ApolloServerPluginLandingPageProductionDefault = ApolloServerPluginLandingPageProductionDefault;\nfunction encodeConfig(config) {\n  return JSON.stringify(encodeURIComponent(JSON.stringify(config)));\n}\nfunction getConfigStringForHtml(config) {\n  return JSON.stringify(config).replace('<', '\\\\u003c').replace('>', '\\\\u003e').replace('&', '\\\\u0026').replace(\"'\", '\\\\u0027');\n}\nconst getEmbeddedExplorerHTML = (version, config) => {\n  const productionLandingPageConfigOrDefault = {\n    displayOptions: {},\n    persistExplorerState: false,\n    ...(typeof config.embed === 'boolean' ? {} : config.embed)\n  };\n  const embeddedExplorerParams = {\n    ...config,\n    target: '#embeddableExplorer',\n    initialState: {\n      ...config,\n      displayOptions: {\n        ...productionLandingPageConfigOrDefault.displayOptions\n      }\n    },\n    persistExplorerState: productionLandingPageConfigOrDefault.persistExplorerState\n  };\n  return `\n<div class=\"fallback\">\n  <h1>Welcome to Apollo Server</h1>\n  <p>Apollo Explorer cannot be loaded; it appears that you might be offline.</p>\n</div>\n<style>\n  iframe {\n    background-color: white;\n  }\n</style>\n<div\nstyle=\"width: 100vw; height: 100vh; position: absolute; top: 0;\"\nid=\"embeddableExplorer\"\n></div>\n<script src=\"https://embeddable-explorer.cdn.apollographql.com/${version}/embeddable-explorer.umd.production.min.js\"></script>\n<script>\n  var endpointUrl = window.location.href;\n  var embeddedExplorerConfig = ${getConfigStringForHtml(embeddedExplorerParams)};\n  new window.EmbeddedExplorer({\n    ...embeddedExplorerConfig,\n    endpointUrl,\n  });\n</script>\n`;\n};\nexports.getEmbeddedExplorerHTML = getEmbeddedExplorerHTML;\nconst getEmbeddedSandboxHTML = (version, config) => {\n  var _a, _b, _c, _d;\n  return `\n<div class=\"fallback\">\n  <h1>Welcome to Apollo Server</h1>\n  <p>Apollo Sandbox cannot be loaded; it appears that you might be offline.</p>\n</div>\n<style>\n  iframe {\n    background-color: white;\n  }\n</style>\n<div\nstyle=\"width: 100vw; height: 100vh; position: absolute; top: 0;\"\nid=\"embeddableSandbox\"\n></div>\n<script src=\"https://embeddable-sandbox.cdn.apollographql.com/${version}/embeddable-sandbox.umd.production.min.js\"></script>\n<script>\n  var initialEndpoint = window.location.href;\n  new window.EmbeddedSandbox({\n    target: '#embeddableSandbox',\n    initialEndpoint,\n    includeCookies: ${(_a = config.includeCookies) !== null && _a !== void 0 ? _a : 'false'},\n    initialState: ${getConfigStringForHtml({\n    document: (_b = config.document) !== null && _b !== void 0 ? _b : undefined,\n    variables: (_c = config.variables) !== null && _c !== void 0 ? _c : undefined,\n    headers: (_d = config.headers) !== null && _d !== void 0 ? _d : undefined\n  })},\n  });\n</script>\n`;\n};\nexports.getEmbeddedSandboxHTML = getEmbeddedSandboxHTML;\nconst getNonEmbeddedLandingPageHTML = (version, config) => {\n  const encodedConfig = encodeConfig(config);\n  return `\n <div class=\"fallback\">\n  <h1>Welcome to Apollo Server</h1>\n  <p>The full landing page cannot be loaded; it appears that you might be offline.</p>\n</div>\n<script>window.landingPage = ${encodedConfig};</script>\n<script src=\"https://apollo-server-landing-page.cdn.apollographql.com/${version}/static/js/main.js\"></script>`;\n};\nfunction ApolloServerPluginLandingPageDefault(maybeVersion, config) {\n  const version = maybeVersion !== null && maybeVersion !== void 0 ? maybeVersion : '_latest';\n  return {\n    __internal_installed_implicitly__: false,\n    async serverWillStart() {\n      return {\n        async renderLandingPage() {\n          const html = `\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\" />\n    <link\n      rel=\"icon\"\n      href=\"https://apollo-server-landing-page.cdn.apollographql.com/${version}/assets/favicon.png\"\n    />\n    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" />\n    <link\n      href=\"https://fonts.googleapis.com/css2?family=Source+Sans+Pro&display=swap\"\n      rel=\"stylesheet\"\n    />\n    <meta name=\"theme-color\" content=\"#000000\" />\n    <meta name=\"description\" content=\"Apollo server landing page\" />\n    <link\n      rel=\"apple-touch-icon\"\n      href=\"https://apollo-server-landing-page.cdn.apollographql.com/${version}/assets/favicon.png\"\n    />\n    <link\n      rel=\"manifest\"\n      href=\"https://apollo-server-landing-page.cdn.apollographql.com/${version}/manifest.json\"\n    />\n    <title>Apollo Server</title>\n  </head>\n  <body style=\"margin: 0; overflow-x: hidden; overflow-y: hidden\">\n    <noscript>You need to enable JavaScript to run this app.</noscript>\n    <div id=\"react-root\">\n      <style>\n        .fallback {\n          opacity: 0;\n          animation: fadeIn 1s 1s;\n          animation-iteration-count: 1;\n          animation-fill-mode: forwards;\n          padding: 1em;\n        }\n        @keyframes fadeIn {\n          0% {opacity:0;}\n          100% {opacity:1; }\n        }\n      </style>\n    ${config.embed ? 'graphRef' in config && config.graphRef ? (0, exports.getEmbeddedExplorerHTML)(version, config) : (0, exports.getEmbeddedSandboxHTML)(version, config) : getNonEmbeddedLandingPageHTML(version, config)}\n    </div>\n  </body>\n</html>\n          `;\n          return {\n            html\n          };\n        }\n      };\n    }\n  };\n}","map":{"version":3,"mappings":"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","names":["ApolloServerPluginLandingPageLocalDefault","options","version","__internal_apolloStudioEnv__","rest","ApolloServerPluginLandingPageDefault","isProd","apolloStudioEnv","exports","ApolloServerPluginLandingPageProductionDefault","encodeConfig","config","JSON","stringify","encodeURIComponent","getConfigStringForHtml","replace","getEmbeddedExplorerHTML","productionLandingPageConfigOrDefault","displayOptions","persistExplorerState","embed","embeddedExplorerParams","target","initialState","getEmbeddedSandboxHTML","_a","includeCookies","document","_b","undefined","variables","_c","headers","_d","getNonEmbeddedLandingPageHTML","encodedConfig","maybeVersion","__internal_installed_implicitly__","serverWillStart","renderLandingPage","html","graphRef"],"sourceRoot":"","sources":["../../../../src/plugin/landingPage/default/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}